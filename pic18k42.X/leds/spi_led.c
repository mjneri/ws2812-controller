//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// spi_led.c -- SPI Driver for Addressable LEDs
//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// Author: mjneri
//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
//
//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// Module Name: spi_led.c
// Description:
//
// Revisions:
// Revision 0.01 - File Created (2022-03-18)
// Additional Comments:
//
//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

// *****************************************************************************
// *****************************************************************************
// Section: Header Includes
// *****************************************************************************
// *****************************************************************************

#include "spi_led.h"

// *****************************************************************************
// *****************************************************************************
// Section: Local Function Defines
// *****************************************************************************
// *****************************************************************************

static void RGB_SendData(rgb_led_t rgbData);

// *****************************************************************************
// *****************************************************************************
// Section: Function Definitions
// *****************************************************************************
// *****************************************************************************

void RGB_Clear(uint16_t ledcount)
{
    rgb_led_t temp;
    
    for(uint16_t i = 0; i < ledcount; i++)
    {
        temp.val = 0;
        RGB_SendData(temp);
    }
    __delay_ms(1);
    return;
}

void RGB_SetColor(uint24_t val)
{
    RGB_SendData((rgb_led_t) val);
    return;
}

void RGB_ALLSetColor(uint16_t ledcount, uint24_t val)
{
    // Set the color values of all LEDs
    uint16_t i = 0;
    for(i = 0; i < ledcount; i++)
    {
        RGB_SendData((rgb_led_t) val);
    }
    
    return;
}

static void RGB_SendData(rgb_led_t rgbData)
{
    SPI1_WriteByte(rgbData.green);
    SPI1_WriteByte(rgbData.red);
    SPI1_WriteByte(rgbData.blue);
}

/*******************************************************************************
 End of File
*/

